<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Image Upload and Management</title>
</head>
<body>
  <h1>Lab6-20021323-TranMinhDuong</h1>
  <button id="uploadButton">Upload Image</button>
  <hr>

  <h1>All Images</h1>
  <div id="imageContainer"></div>

  <script>
    document.getElementById('uploadButton').addEventListener('click', () => {
      window.location.href = 'upload.html';
    });

    async function fetchImages() {
      try {
        const response = await fetch('http://35.212.136.71:3000/images');
        const images = await response.json();

        const imageContainer = document.getElementById('imageContainer');
        imageContainer.innerHTML = ''; // Clear existing images

        const table = document.createElement('table');

        images.forEach(image => {
          const row = table.insertRow();

          const idCell = row.insertCell();
          idCell.textContent = image.id;

          const imgCell = row.insertCell();
          const imgElement = document.createElement('img');
          imgElement.src = image.url;
          imgElement.style.maxWidth = '200px';
          imgElement.style.marginRight = '10px';
          imgElement.style.marginBottom = '10px';
          imgCell.appendChild(imgElement);
        });

        // Đưa bảng vào container
        imageContainer.appendChild(table);
      } catch (error) {
        console.error('Error:', error);
        alert('Failed to fetch images.');
      }
    }

    // Fetch images when the page loads
    fetchImages();
  </script>
</body>
</html>
